FROM debian:jessie

LABEL author="t0kx (t0kx@protonmail.ch)"
LABEL maintainer="cved (cved@protonmail.com)"

ENV LANG C.UTF-8
ENV LANGUAGE C.UTF-8
ENV LC_ALL C.UTF-8

ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get -y update \
    && apt-get -y install \
    wget \
    curl \
    openjdk-7-jre-headless \
    && apt-get autoremove \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

RUN wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.4.2.tar.gz \
    && tar xfz elasticsearch-1.4.2.tar.gz \
    && mv elasticsearch-1.4.2 elasticsearch

COPY build/main.sh /

EXPOSE 9200

ENTRYPOINT ["/main.sh"]

CMD ["default"]
